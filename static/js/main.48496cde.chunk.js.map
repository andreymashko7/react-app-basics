{"version":3,"sources":["components/UI/myModal/MyModal.module.css","components/UI/button/MyButton.module.css","components/UI/input/MyInput.module.css","components/UI/Loader/Loader.module.css","context/index.js","components/UI/button/MyButton.js","components/UI/Navbar/Navbar.js","pages/About.js","hooks/usePosts.js","hooks/useFetching.js","utils/pages.js","API/PostService.js","components/PostItem.js","components/PostList.js","components/UI/input/MyInput.js","components/PostForm.js","components/UI/select/MySelect.js","components/PostFilter.js","components/UI/myModal/MyModal.js","components/UI/Loader/Loader.js","components/UI/pagination/Pagination.js","pages/PostIdPage.js","router/routes.js","pages/Posts.js","hooks/useObserver.js","pages/Login.js","components/AppRouter.js","App.js","index.js"],"names":["module","exports","AuthContext","createContext","MyButton","children","props","className","classes","myBtn","Navbar","useContext","setIsAuth","isAuth","onClick","localStorage","removeItem","to","About","usePosts","posts","sort","query","sortedPosts","useMemo","a","b","localeCompare","useSortedPosts","filter","post","title","toLocaleLowerCase","includes","useFetching","callback","useState","isLoading","setLoading","error","setError","message","getPageCount","totalCount","limit","Math","ceil","PostService","page","axios","get","params","_limit","_page","response","id","PostItem","router","useHistory","body","push","remove","PostList","length","style","textAlign","TransitionGroup","map","index","CSSTransition","timeout","classNames","number","MyInput","myInput","PostForm","create","setPost","type","value","onChange","e","target","placeholder","preventDefault","newPost","Date","now","MySelect","options","defaultValue","event","disabled","option","name","PostFilter","setFilter","selectedSort","MyModal","visible","setVisible","rootClasses","cl","myModal","active","join","myModalContent","stopPropagation","Loader","loader","Pagination","totalPages","changePage","pagesArray","result","i","getPagesArray","p","privateRoutes","path","component","exact","setPosts","modal","setModal","setTotalPages","setLimit","setPage","lastElement","useRef","getAll","data","headers","fetchPosts","isPostLoading","postError","ref","canLoading","observer","useEffect","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","sortedAndSearchedPosts","marginTop","margin","height","background","display","justifyContent","comments","setComments","useParams","getById","fetchById","getCommentsByPostId","fetchComments","isComLoading","maxWidth","comm","email","publicRoutes","onSubmit","setItem","AppRouter","route","App","getItem","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.48496cde.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__hxczK\",\"myModalContent\":\"MyModal_myModalContent__3pmxT\",\"active\":\"MyModal_active__1s5Mo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"MyButton_myBtn__Okoo5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"MyInput_myInput__2LTdF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1U37L\",\"rotate\":\"Loader_rotate__gq4iK\"};","import { createContext } from \"react\";\r\n\r\nexport const AuthContext = createContext(null);\r\n","import classes from \"./MyButton.module.css\";\r\n\r\nconst MyButton = ({ children, ...props }) => {\r\n  return (\r\n    <button {...props} className={classes.myBtn}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default MyButton;\r\n","import { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../context\";\r\nimport MyButton from \"../button/MyButton\";\r\n\r\nconst Navbar = () => {\r\n  const { isAuth, setIsAuth } = useContext(AuthContext);\r\n\r\n  const logOut = () => {\r\n    setIsAuth(false);\r\n    localStorage.removeItem(\"auth\");\r\n  };\r\n  return (\r\n    <div className=\"navbar\">\r\n      <MyButton onClick={logOut}>Exit</MyButton>\r\n      <div className=\"navbar__link\">\r\n        <Link to=\"/about\">About app</Link>\r\n        <Link to=\"/posts\">Posts</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","const About = () => {\r\n  return <h1>This app is made for practice</h1>;\r\n};\r\n\r\nexport default About;\r\n","import { useMemo } from \"react\";\r\n\r\nexport const useSortedPosts = (posts, sort) => {\r\n  const sortedPosts = useMemo(() => {\r\n    if (sort) {\r\n      return [...posts].sort((a, b) => a[sort].localeCompare(b[sort]));\r\n    }\r\n    return posts;\r\n  }, [posts, sort]);\r\n  return sortedPosts;\r\n};\r\n\r\nexport const usePosts = (posts, sort, query) => {\r\n  const sortedPosts = useSortedPosts(posts, sort);\r\n  const sortedAndSearchedPosts = useMemo(() => {\r\n    return sortedPosts.filter((post) =>\r\n      post.title.toLocaleLowerCase().includes(query.toLocaleLowerCase())\r\n    );\r\n  }, [query, sortedPosts]);\r\n  return sortedAndSearchedPosts;\r\n};\r\n","import { useState } from \"react\";\r\n\r\nexport const useFetching = (callback) => {\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const fetching = async (...args) => {\r\n    try {\r\n      setLoading(true);\r\n      await callback(...args);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return [fetching, isLoading, error];\r\n};\r\n","export const getPageCount = (totalCount, limit) => {\r\n  return Math.ceil(totalCount / limit);\r\n};\r\n\r\nexport const getPagesArray = (totalPages) => {\r\n  let result = [];\r\n  for (let i = 0; i < totalPages; i++) {\r\n    result.push(i + 1);\r\n  }\r\n\r\n  return result;\r\n};\r\n","import axios from \"axios\";\r\n\r\nexport default class PostService {\r\n  static async getAll(limit = 10, page = 1) {\r\n    const response = await axios.get(\r\n      \"https://jsonplaceholder.typicode.com/posts\",\r\n      {\r\n        params: {\r\n          _limit: limit,\r\n          _page: page,\r\n        },\r\n      }\r\n    );\r\n\r\n    return response;\r\n  }\r\n\r\n  static async getById(id) {\r\n    const response = await axios.get(\r\n      \"https://jsonplaceholder.typicode.com/posts/\" + id\r\n    );\r\n    return response;\r\n  }\r\n\r\n  static async getCommentsByPostId(id) {\r\n    const response = await axios.get(\r\n      `https://jsonplaceholder.typicode.com/posts/${id}/comments`\r\n    );\r\n    return response;\r\n  }\r\n}\r\n","import { useHistory } from \"react-router-dom\";\r\nimport MyButton from \"./UI/button/MyButton\";\r\nimport React from \"react\";\r\n\r\nexport default function PostItem(props) {\r\n  const router = useHistory();\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"post-content\">\r\n        <strong>\r\n          {props.post.id}. {props.post.title}\r\n        </strong>\r\n        <div>{props.post.body}</div>\r\n      </div>\r\n      <div className=\"post-btn\">\r\n        <MyButton\r\n          onClick={() => {\r\n            router.push(`/posts/${props.post.id}`);\r\n          }}\r\n        >\r\n          open\r\n        </MyButton>\r\n        <MyButton\r\n          onClick={() => {\r\n            props.remove(props.post);\r\n          }}\r\n        >\r\n          delete\r\n        </MyButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport PostItem from \"./PostItem\";\r\n\r\nexport default function PostList({ posts, title, remove }) {\r\n  if (!posts.length) {\r\n    return <h1 style={{ textAlign: \"center\" }}>No posts !!!</h1>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1 style={{ textAlign: \"center\" }}>{title}</h1>\r\n      <TransitionGroup>\r\n        {posts.map((post, index) => (\r\n          <CSSTransition key={post.id} timeout={500} classNames=\"post\">\r\n            <PostItem remove={remove} post={post} number={index + 1} />\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </div>\r\n  );\r\n}\r\n","import classes from \"./MyInput.module.css\";\r\n\r\nconst MyInput = (props) => {\r\n  return <input {...props} className={classes.myInput} />;\r\n};\r\n\r\nexport default MyInput;\r\n","import MyInput from \"./UI/input/MyInput\";\r\nimport MyButton from \"./UI/button/MyButton\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function PostForm({ create }) {\r\n  const [post, setPost] = useState({ title: \"\", body: \"\" });\r\n\r\n  const addNewPost = (e) => {\r\n    e.preventDefault();\r\n\r\n    const newPost = {\r\n      ...post,\r\n      id: Date.now(),\r\n    };\r\n    create(newPost);\r\n    setPost({ title: \"\", body: \"\" });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form>\r\n        <MyInput\r\n          type=\"text\"\r\n          value={post.title}\r\n          onChange={(e) => setPost({ ...post, title: e.target.value })}\r\n          placeholder=\"create title\"\r\n        />\r\n        <MyInput\r\n          type=\"text\"\r\n          onChange={(e) => setPost({ ...post, body: e.target.value })}\r\n          value={post.body}\r\n          placeholder=\"create description\"\r\n        />\r\n        <MyButton onClick={addNewPost}>create post</MyButton>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n","const MySelect = ({ options, defaultValue, value, onChange }) => {\r\n  return (\r\n    <select value={value} onChange={(event) => onChange(event.target.value)}>\r\n      <option disabled value=\"\">\r\n        {defaultValue}\r\n      </option>\r\n      {options.map((option) => (\r\n        <option key={option.value} value={option.value}>\r\n          {option.name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n};\r\n\r\nexport default MySelect;\r\n","import MyInput from \"./UI/input/MyInput\";\r\nimport MySelect from \"./UI/select/MySelect\";\r\n\r\nconst PostFilter = ({ filter, setFilter }) => {\r\n  return (\r\n    <div>\r\n      <MyInput\r\n        value={filter.query}\r\n        onChange={(event) =>\r\n          setFilter({ ...filter, query: event.target.value })\r\n        }\r\n        placeholder=\"search\"\r\n      />\r\n      <MySelect\r\n        value={filter.sort}\r\n        onChange={(selectedSort) =>\r\n          setFilter({ ...filter, sort: selectedSort })\r\n        }\r\n        defaultValue=\"sort by\"\r\n        options={[\r\n          { value: \"title\", name: \"by name\" },\r\n          {\r\n            value: \"body\",\r\n            name: \"by description\",\r\n          },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostFilter;\r\n","import cl from \"./MyModal.module.css\";\r\n\r\nconst MyModal = ({ children, visible, setVisible }) => {\r\n  const rootClasses = [cl.myModal];\r\n\r\n  if (visible) {\r\n    rootClasses.push(cl.active);\r\n  }\r\n  return (\r\n    <div className={rootClasses.join(\" \")} onClick={() => setVisible(false)}>\r\n      <div className={cl.myModalContent} onClick={(e) => e.stopPropagation()}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyModal;\r\n","import cl from \"./Loader.module.css\";\r\n\r\nconst Loader = () => {\r\n  return <div className={cl.loader}></div>;\r\n};\r\n\r\nexport default Loader;\r\n","import React from \"react\";\r\nimport { getPagesArray } from \"../../../utils/pages\";\r\n\r\nconst Pagination = ({ totalPages, page, changePage }) => {\r\n  let pagesArray = getPagesArray(totalPages);\r\n\r\n  return (\r\n    <div className=\"page__wrapper\">\r\n      {pagesArray.map((p) => (\r\n        <span\r\n          key={p}\r\n          onClick={() => changePage(p)}\r\n          className={page === p ? \"page page__current\" : \"page\"}\r\n        >\r\n          {p}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import { useParams } from \"react-router-dom\";\r\nimport { useFetching } from \"../hooks/useFetching\";\r\nimport PostService from \"./../API/PostService\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Loader from \"./../components/UI/Loader/Loader\";\r\n\r\nconst PostIdPage = () => {\r\n  const [post, setPost] = useState({});\r\n  const [comments, setComments] = useState([]);\r\n  const params = useParams();\r\n  const [fetchById, isLoading, error] = useFetching(async (id) => {\r\n    const response = await PostService.getById(id);\r\n    setPost(response.data);\r\n  });\r\n\r\n  const [fetchComments, isComLoading, comError] = useFetching(async (id) => {\r\n    const response = await PostService.getCommentsByPostId(id);\r\n    setComments(response.data);\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchById(params.id);\r\n    fetchComments(params.id);\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ maxWidth: 800 }}>\r\n      <h1 style={{ justifyContent: \"center\", display: \"flex\" }}>\r\n        this is page about post with id = {params.id}\r\n      </h1>\r\n      {isLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <div>\r\n          {post.id}. {post.title}\r\n        </div>\r\n      )}\r\n      <h3>Comments:</h3>\r\n      {isComLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <div>\r\n          {comments.map((comm) => (\r\n            <div style={{ marginTop: 15 }} key={comm.id}>\r\n              <h5>{comm.email}</h5>\r\n              <div>{comm.body}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostIdPage;\r\n","import About from \"./../pages/About\";\r\nimport Posts from \"../pages/Posts\";\r\nimport PostIdPage from \"./../pages/PostIdPage\";\r\nimport Login from \"./../pages/Login\";\r\n\r\nexport const privateRoutes = [\r\n  { path: \"/about\", component: About, exact: true },\r\n  { path: \"/posts\", component: Posts, exact: true },\r\n  { path: \"/posts/:id\", component: PostIdPage, exact: true },\r\n];\r\n\r\nexport const publicRoutes = [{ path: \"/login\", component: Login, exact: true }];\r\n","import \"../App.css\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { usePosts } from \"../hooks/usePosts\";\r\nimport { useFetching } from \"../hooks/useFetching\";\r\nimport { getPageCount } from \"../utils/pages\";\r\nimport { useObserver } from \"./../hooks/useObserver\";\r\n\r\n// import PostService from \"./API/PostService\";\r\n// import PostList from \"./components/PostList\";\r\n// import PostForm from \"./components/PostForm\";\r\n// import PostFilter from \"./components/PostFilter\";\r\n// import MyModal from \"./components/UI/myModal/MyModal\";\r\n// import MyButton from \"./components/UI/button/MyButton\";\r\n// import Loader from \"./components/UI/Loader/Loader\";\r\n// import Pagination from \"./components/UI/pagination/Pagination\";\r\n\r\n// import MyButton from \"./components/UI/button/MyButton\";\r\n// import MySelect from \"./components/UI/select/MySelect\";\r\n// import MyInput from \"./components/UI/input/MyInput\";\r\nimport PostService from \"./../API/PostService\";\r\nimport PostList from \"./../components/PostList\";\r\nimport PostForm from \"./../components/PostForm\";\r\nimport PostFilter from \"./../components/PostFilter\";\r\nimport MyModal from \"./../components/UI/myModal/MyModal\";\r\nimport MyButton from \"./../components/UI/button/MyButton\";\r\nimport Loader from \"./../components/UI/Loader/Loader\";\r\nimport Pagination from \"./../components/UI/pagination/Pagination\";\r\nimport MySelect from \"../components/UI/select/MySelect\";\r\n\r\nexport default function App() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [filter, setFilter] = useState({ sort: \"\", query: \"\" });\r\n  const [modal, setModal] = useState(false);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n  const [page, setPage] = useState(1);\r\n\r\n  const lastElement = useRef();\r\n\r\n  const [fetchPosts, isPostLoading, postError] = useFetching(\r\n    async (limit, page) => {\r\n      const response = await PostService.getAll(limit, page);\r\n      setPosts([...posts, ...response.data]);\r\n      const totalCount = response.headers[\"x-total-count\"];\r\n      setTotalPages(getPageCount(totalCount, limit));\r\n    }\r\n  );\r\n\r\n  useObserver(lastElement, page < totalPages, isPostLoading, () => {\r\n    setPage(page + 1);\r\n  });\r\n\r\n  const sortedAndSearchedPosts = usePosts(posts, filter.sort, filter.query);\r\n\r\n  // const [selectedSort, setSelectedSort] = useState(\"\");\r\n  // const [searchQuery, setSearchQuery] = useState(\"\");\r\n  // const [body, setBody] = useState(\"\");\r\n  // const [title, setTitle] = useState(\"\");\r\n\r\n  const createPost = (newPost) => {\r\n    setPosts([...posts, newPost]);\r\n    setModal(false);\r\n  };\r\n\r\n  const removePost = (post) => {\r\n    setPosts(posts.filter((p) => p.id !== post.id));\r\n  };\r\n\r\n  const changePage = (page) => {\r\n    setPage(page);\r\n    // fetchPosts(limit, page);\r\n  };\r\n\r\n  // const sortPosts = (sort) => {\r\n  //   setSelectedSort(sort);\r\n  // };\r\n\r\n  useEffect(() => {\r\n    fetchPosts(limit, page);\r\n  }, [page, limit]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {/* <button onClick={fetchPosts}> Get posts</button> */}\r\n      <MyButton style={{ marginTop: \"30px\" }} onClick={() => setModal(true)}>\r\n        Create user\r\n      </MyButton>\r\n      <MyModal visible={modal} setVisible={setModal}>\r\n        <PostForm create={createPost} />\r\n      </MyModal>\r\n      <hr style={{ margin: \"15px 0\" }} />\r\n\r\n      <PostFilter filter={filter} setFilter={setFilter} />\r\n      <MySelect\r\n        value={limit}\r\n        onChange={(value) => setLimit(value)}\r\n        defaultValue=\"Elements per page\"\r\n        options={[\r\n          { value: 5, name: \"5\" },\r\n          { value: 10, name: \"10\" },\r\n          { value: 25, name: \"25\" },\r\n          { value: -1, name: \"show all\" },\r\n        ]}\r\n      />\r\n      {/* {sortedAndSearchedPosts.length !== 0 ? ( */}\r\n      {/* ) : ( */}\r\n      {/* )} */}\r\n\r\n      {postError && <h1>Error ${postError}</h1>}\r\n\r\n      <PostList\r\n        remove={removePost}\r\n        posts={sortedAndSearchedPosts}\r\n        title={\"Posts about js\"}\r\n      />\r\n      <div ref={lastElement} style={{ height: 20, background: \"teal\" }} />\r\n\r\n      {isPostLoading && (\r\n        <div\r\n          style={{ display: \"flex\", justifyContent: \"center\", marginTop: 50 }}\r\n        >\r\n          <Loader />\r\n        </div>\r\n      )}\r\n      <Pagination page={page} changePage={changePage} totalPages={totalPages} />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport const useObserver = (ref, canLoading, isLoading, callback) => {\r\n  const observer = useRef();\r\n\r\n  useEffect(() => {\r\n    if (isLoading) return;\r\n    if (observer.current) observer.current.disconnect();\r\n    var cb = function (entries, observer) {\r\n      if (entries[0].isIntersecting && canLoading) {\r\n        callback();\r\n      }\r\n    };\r\n    observer.current = new IntersectionObserver(cb);\r\n    observer.current.observe(ref.current);\r\n  }, [isLoading]);\r\n};\r\n","import { useContext } from \"react\";\r\nimport { AuthContext } from \"../context\";\r\nimport MyInput from \"../components/UI/input/MyInput\";\r\nimport MyButton from \"./../components/UI/button/MyButton\";\r\n\r\nconst Login = () => {\r\n  const { isAuth, setIsAuth } = useContext(AuthContext);\r\n\r\n  const login = (event) => {\r\n    event.preventDefault();\r\n    setIsAuth(true);\r\n    localStorage.setItem(\"auth\", \"true\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Page for login</h1>\r\n      <form onSubmit={login}>\r\n        <MyInput type=\"text\" placeholder=\"enter your name\" />\r\n        <MyInput type=\"password\" placeholder=\"enter your password\" />\r\n        <MyButton>Enter</MyButton>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { useContext } from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context\";\r\n// import Error from \"./../pages/Error\";\r\nimport { privateRoutes, publicRoutes } from \"./../router/routes\";\r\nimport Loader from \"./UI/Loader/Loader\";\r\n\r\nconst AppRouter = () => {\r\n  const { isAuth, isLoading } = useContext(AuthContext);\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return isAuth ? (\r\n    <Switch>\r\n      {privateRoutes.map((route) => (\r\n        <Route\r\n          key={route.path}\r\n          component={route.component}\r\n          path={route.path}\r\n          exact={route.exact}\r\n        />\r\n      ))}\r\n      <Redirect to=\"/posts\" />\r\n    </Switch>\r\n  ) : (\r\n    <Switch>\r\n      {publicRoutes.map((route, index) => (\r\n        <Route\r\n          key={route.path}\r\n          component={route.component}\r\n          path={route.path}\r\n          exact={route.exact}\r\n        />\r\n      ))}\r\n      <Redirect to=\"/login\" />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import { AuthContext } from \"./context/index\";\nimport { HashRouter } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\n\nimport Navbar from \"./components/UI/Navbar/Navbar\";\nimport AppRouter from \"./components/AppRouter\";\n// import About from \"./pages/About\";\n// import Posts from \"./pages/Posts\";\n// import Error from \"./pages/Error\";\n\n// import { useState, useEffect } from \"react\";\n// import { usePosts } from \"./hooks/usePosts\";\n// import { useFetching } from \"./hooks/useFetching\";\n// import { getPageCount } from \"./utils/pages\";\n\n// import PostService from \"./API/PostService\";\n// import PostList from \"./components/PostList\";\n// import PostForm from \"./components/PostForm\";\n// import PostFilter from \"./components/PostFilter\";\n// import MyModal from \"./components/UI/myModal/MyModal\";\n// import MyButton from \"./components/UI/button/MyButton\";\n// import Loader from \"./components/UI/Loader/Loader\";\n// import Pagination from \"./components/UI/pagination/Pagination\";\n\n// import MyButton from \"./components/UI/button/MyButton\";\n// import MySelect from \"./components/UI/select/MySelect\";\n// import MyInput from \"./components/UI/input/MyInput\";\n\nexport default function App() {\n  const [isAuth, setIsAuth] = useState(false);\n  const [isLoading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"auth\")) {\n      setIsAuth(true);\n    }\n    setLoading(false);\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ isAuth, setIsAuth, isLoading }}>\n      <HashRouter>\n        <Navbar />\n        <AppRouter />\n      </HashRouter>\n    </AuthContext.Provider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  // <React.StrictMode>\n\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}